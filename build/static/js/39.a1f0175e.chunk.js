"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[39],{2624:function(e,l,r){var a=r(6934),t=r(8860);const i=(0,a.ZP)("div")({"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell":{borderBottom:"none"},"& .name-column--cell":{color:t.Z.primary.main,cursor:"pointer"},"& .name-column--cell--capitalize":{textTransform:"capitalize"},"& .name-column--cell:hover":{textDecoration:"underline"},"& .MuiDataGrid-columnHeaders":{backgroundColor:t.Z.grey[200],borderBottom:"none",outline:"none !important",borderRadius:"0px"},"& .MuiDataGrid-virtualScroller":{scrollbarWidth:"1px"},"& .MuiDataGrid-toolbarContainer .MuiButton-text":{textTransform:"capitalize",fontSize:"15px"},".MuiDataGrid-cell:focus,.MuiDataGrid-columnHeader:focus,MuiDataGrid-columnHeaderCheckbox:focus":{outline:"none !important"},".css-1jiby6q-MuiDataGrid-root .MuiDataGrid-columnHeader:focus-within, .css-1jiby6q-MuiDataGrid-root .MuiDataGrid-cell:focus-within":{outline:"none"}});l.Z=i},8860:function(e,l,r){var a=r(2065);const t={0:"#FFFFFF",100:"#F9FAFB",200:"#F4F6F8",300:"#DFE3E8",400:"#C4CDD5",500:"#919EAB",600:"#637381",700:"#454F5B",800:"#212B36",900:"#161C24"},i={common:{black:"#000",white:"#fff"},primary:{lighter:"#D1E9FC",light:"#76B0F1",main:"#2065D1",dark:"#103996",darker:"#061B64",contrastText:"#fff"},secondary:{lighter:"#D6E4FF",light:"#84A9FF",main:"#3366FF",dark:"#1939B7",darker:"#091A7A",contrastText:"#fff"},info:{lighter:"#D0F2FF",light:"#74CAFF",main:"#1890FF",dark:"#0C53B7",darker:"#04297A",contrastText:"#fff"},success:{lighter:"#E9FCD4",light:"#AAF27F",main:"#54D62C",dark:"#229A16",darker:"#08660D",contrastText:t[800]},warning:{lighter:"#FFF7CD",light:"#FFE16A",main:"#FFC107",dark:"#B78103",darker:"#7A4F01",contrastText:t[800]},error:{lighter:"#FFE7D9",light:"#FFA48D",main:"#FF4842",dark:"#B72136",darker:"#7A0C2E",contrastText:"#fff"},grey:t,divider:(0,a.Fq)(t[500],.24),text:{primary:t[800],secondary:t[600],disabled:t[500]},background:{paper:"#fff",default:t[100],neutral:t[200]},action:{active:t[600],hover:(0,a.Fq)(t[500],.08),selected:(0,a.Fq)(t[500],.16),disabled:(0,a.Fq)(t[500],.8),disabledBackground:(0,a.Fq)(t[500],.24),focus:(0,a.Fq)(t[500],.24),hoverOpacity:.08,disabledOpacity:.48}};l.Z=i},5310:function(e,l,r){r.d(l,{Z:function(){return c}});var a=r(2007),t=r.n(a),i=r(2791),n=r(2711),o=r(4554),d=r(184);const s=(0,i.forwardRef)(((e,l)=>{let{icon:r,width:a=20,sx:t,...i}=e;return(0,d.jsx)(o.Z,{ref:l,component:n.JO,icon:r,sx:{width:a,height:a,...t},...i})}));s.propTypes={sx:t().object,width:t().oneOfType([t().number,t().string]),icon:t().oneOfType([t().element,t().string])};var c=s},3039:function(e,l,r){r.r(l),r.d(l,{default:function(){return z}});var a=r(2791),t=r(9164),i=r(3767),n=r(890),o=r(6151),d=r(4554),s=r(7621),c=r(5310),u=r(1956),m=r(39),h=r(2624),f=r(5289),p=r(7123),x=r(9157),v=r(5661),g=r(1889),Z=r(8550),F=r(8096),j=r(5130),y=r(3786),C=r(8406),b=r(2506),A=r(1724),D=r(5294),S=r(1240),T=r(7133),E=r(7071),w=r(5985),k=r(8860),_=r(184);var B=e=>{const{open:l,handleClose:r,fetchSalesData:t}=e,[i,d]=(0,a.useState)([]),[s,c]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),h=A.Ry({liter:A.Z_().required("Liter is required"),pump:A.Z_().required("Pump is required"),fuel:A.Z_().required("Fuel is required"),staff:A.Z_().required("Staff is required")}),B=(0,b.TA)({initialValues:{liter:"",amount:"",pump:"",fuel:"",staff:""},validationSchema:h,onSubmit:async e=>{console.log(e);try{const l=await D.Z.post(null===S.l||void 0===S.l?void 0:S.l.addSales,e);console.log(l),console.log("API response:",l.data),"internal server error"==l.data?w.Am.error("Something Went Wrong",{autoClose:600}):"fuel not available"==l.data?w.Am.error("No Enough Fuel "):(w.Am.success("data saved successfully",{autoClose:600}),B.resetForm(),r(),await t())}catch(l){console.error("Error SavingData:",l),w.Am.error("Failed to add SavingData",{autoClose:600})}}});return(0,a.useEffect)((()=>{(async()=>{try{const e=(await D.Z.get(null===S.l||void 0===S.l?void 0:S.l.getPump)).data.map((e=>({name:null===e||void 0===e?void 0:e.code,id:null===e||void 0===e?void 0:e._id})));d(e)}catch(e){console.error("Error fetching fuel data:",e)}})(),(async()=>{try{const e=(await D.Z.get(null===S.l||void 0===S.l?void 0:S.l.getStaff)).data.map((e=>({name:null===e||void 0===e?void 0:e.full_name,id:null===e||void 0===e?void 0:e._id})));c(e)}catch(e){console.error("Error fetching supplier data:",e)}})(),(async()=>{try{const e=(await D.Z.get(null===S.l||void 0===S.l?void 0:S.l.fuelList)).data.map((e=>({name:null===e||void 0===e?void 0:e.fuel_type,id:null===e||void 0===e?void 0:e._id})));m(e)}catch(e){console.error("Error fetching fuel data:",e)}})()}),[]),(0,_.jsx)("div",{children:(0,_.jsxs)(f.Z,{open:l,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,_.jsxs)(v.Z,{id:"scroll-dialog-title",style:{display:"flex",justifyContent:"space-between"},children:[(0,_.jsx)(n.Z,{variant:"h6",children:"Add New "}),(0,_.jsx)(n.Z,{children:(0,_.jsx)(j.Z,{onClick:r,style:{cursor:"pointer"}})})]}),(0,_.jsx)(x.Z,{dividers:!0,children:(0,_.jsxs)("form",{onSubmit:B.handleSubmit,children:[(0,_.jsx)(n.Z,{style:{marginBottom:"15px"},variant:"h6",children:"Basic Sales Information"}),(0,_.jsxs)(g.ZP,{container:!0,rowSpacing:3,columnSpacing:{xs:0,sm:5,md:4},children:[(0,_.jsx)(g.ZP,{item:!0,xs:12,sm:6,md:6,children:(0,_.jsxs)(F.Z,{fullWidth:!0,children:[(0,_.jsx)(T.Z,{children:"PUMP"}),(0,_.jsx)(C.Z,{labelId:"demo-simple-select-label",id:"pump",name:"pump",label:"",size:"small",fullWidth:!0,value:B.values.pump||"",onChange:B.handleChange,error:B.touched.pump&&Boolean(B.errors.pump),helperText:B.touched.pump&&B.errors.pump,children:i&&i.map((e=>(0,_.jsx)(y.Z,{value:e.id,children:e.name},e.id)))}),(0,_.jsx)(E.Z,{style:{color:k.Z.error.main},children:B.touched.pump&&B.errors.pump})]})}),(0,_.jsx)(g.ZP,{item:!0,xs:12,sm:6,md:6,children:(0,_.jsxs)(F.Z,{fullWidth:!0,children:[(0,_.jsx)(T.Z,{children:"FUEL"}),(0,_.jsx)(C.Z,{labelId:"demo-simple-select-label",id:"fuel",name:"fuel",label:"",size:"small",fullWidth:!0,value:B.values.fuel,onChange:B.handleChange,error:B.touched.fuel&&Boolean(B.errors.fuel),children:u&&u.map((e=>(0,_.jsx)(y.Z,{value:e.id,children:e.name},e.id)))}),(0,_.jsx)(E.Z,{style:{color:k.Z.error.main},children:B.touched.fuel&&B.errors.fuel})]})}),(0,_.jsx)(g.ZP,{item:!0,xs:12,sm:6,md:6,children:(0,_.jsxs)(F.Z,{fullWidth:!0,children:[(0,_.jsx)(T.Z,{children:"EMPLOYEE"}),(0,_.jsx)(C.Z,{id:"staff",name:"staff",label:"",size:"small",fullWidth:!0,value:B.values.staff||"",onChange:B.handleChange,error:B.touched.staff&&Boolean(B.errors.staff),helperText:B.touched.staff&&B.errors.staff,children:s&&s.map((e=>(0,_.jsx)(y.Z,{value:e.id,children:e.name},e.id)))}),(0,_.jsx)(E.Z,{style:{color:k.Z.error.main},children:B.touched.staff&&B.errors.staff})]})}),(0,_.jsxs)(g.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,_.jsx)(T.Z,{children:"AMOUNT"}),(0,_.jsx)(Z.Z,{id:"amount",name:"amount",type:"number",size:"small",fullWidth:!0,value:B.values.amount,onChange:B.handleChange,error:B.touched.amount&&Boolean(B.errors.amount),helperText:B.touched.amount&&B.errors.amount})]}),(0,_.jsxs)(g.ZP,{item:!0,xs:12,sm:12,md:12,children:[(0,_.jsx)(T.Z,{children:"LITER_SOLD"}),(0,_.jsx)(Z.Z,{id:"liter",name:"liter",type:"number",size:"small",fullWidth:!0,value:B.values.liter,onChange:B.handleChange,error:B.touched.liter&&Boolean(B.errors.liter),helperText:B.touched.liter&&B.errors.liter})]})]}),(0,_.jsxs)(p.Z,{children:[(0,_.jsx)(o.Z,{type:"submit",variant:"contained",style:{textTransform:"capitalize"},children:"Save"}),(0,_.jsx)(o.Z,{type:"reset",variant:"outlined",style:{textTransform:"capitalize"},color:"error",onClick:()=>{B.resetForm(),r()},children:"Cancel"})]})]})})]})})},M=r(2426),N=r.n(M);var z=()=>{const[e,l]=(0,a.useState)(!1),[r,f]=(0,a.useState)([]),p=async()=>{try{const e=await D.Z.get(null===S.l||void 0===S.l?void 0:S.l.getSales);console.log(e);const l=e.data.map((e=>({attendant:null===e||void 0===e?void 0:e.staff.full_name,fuel:null===e||void 0===e?void 0:e.fuel.fuel_type,pump:null===e||void 0===e?void 0:e.pump.code,date:N()(null===e||void 0===e?void 0:e.created_at).format("YYYY-MM-DD HH:mm:ss"),priceL:null===e||void 0===e?void 0:e.fuel.liter_price,litersSold:null===e||void 0===e?void 0:e.liter,totalAmount:(null===e||void 0===e?void 0:e.fuel.liter_price)*e.liter,id:null===e||void 0===e?void 0:e._id})));f(l)}catch(e){console.error("Error fetching fuel data:",e)}};return(0,a.useEffect)((()=>{p()}),[]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(B,{open:e,handleClose:()=>l(!1),fetchSalesData:p}),(0,_.jsxs)(t.Z,{children:[(0,_.jsxs)(i.Z,{direction:"row",alignItems:"center",mb:5,justifyContent:"space-between",children:[(0,_.jsx)(n.Z,{variant:"h4",children:"Sales-Management"}),(0,_.jsx)(i.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:2,children:(0,_.jsx)(o.Z,{variant:"contained",startIcon:(0,_.jsx)(c.Z,{icon:"eva:plus-fill"}),onClick:()=>l(!0),children:"Add Sales"})})]}),(0,_.jsx)(h.Z,{children:(0,_.jsx)(d.Z,{width:"100%",children:(0,_.jsx)(s.Z,{style:{height:"600px",paddingTop:"15px"},children:(0,_.jsx)(u._$,{rows:r&&r,columns:[{field:"attendant",headerName:"ATTENDANT",flex:1,cellClassName:" name-column--cell--capitalize",headerAlign:"center",align:"center"},{field:"fuel",headerName:"FUEL",flex:1,cellClassName:" name-column--cell--capitalize",headerAlign:"center",align:"center"},{field:"pump",headerName:"PUMP",flex:1,cellClassName:"name-column--cell--capitalize",headerAlign:"center",align:"center"},{field:"priceL",headerName:"PRICE/L",flex:1,cellClassName:"name-column--cell--capitalize",headerAlign:"center",align:"center"},{field:"litersSold",headerName:"LITERS SOLD",flex:1,cellClassName:"name-column--cell--capitalize",headerAlign:"center",align:"center"},{field:"totalAmount",headerName:"TOTAL AMOUNT",flex:1,cellClassName:"name-column--cell--capitalize",headerAlign:"center",align:"center"},{field:"date",headerName:"DATE",flex:1,cellClassName:"name-column--cell--capitalize",headerAlign:"center",align:"center"}],getRowId:e=>e.id,slots:{toolbar:m.n},slotProps:{toolbar:{showQuickFilter:!0}}})})})})]})]})}}}]);
//# sourceMappingURL=39.a1f0175e.chunk.js.map